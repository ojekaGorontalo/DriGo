<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Driver OloRide | Aplikasi Ojek Gorontalo</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary: #FF5722;
            --primary-dark: #E64A19;
            --secondary: #2C3E50;
            --light: #F5F5F5;
            --dark: #212121;
            --text: #333333;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #F5F5F5 0%, #E0E0E0 100%);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            max-width: 500px;
            width: 100%;
            background: white;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        .header {
            background: var(--primary);
            color: white;
            padding: 30px 20px;
            text-align: center;
            position: relative;
        }
        
        .logo {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .logo i {
            margin-right: 10px;
        }
        
        .tagline {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .content {
            padding: 30px;
        }
        
        .welcome-text {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .welcome-text h1 {
            color: var(--primary);
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .welcome-text p {
            font-size: 14px;
            color: var(--text);
            opacity: 0.8;
        }
        
        .login-btn {
            width: 100%;
            padding: 15px;
            border-radius: 8px;
            border: none;
            background: #4285F4;
            color: white;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        
        .login-btn:hover {
            background: #3367D6;
            transform: translateY(-2px);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.15);
        }
        
        .login-btn i {
            font-size: 20px;
            margin-right: 10px;
        }
        
        .about-app {
            background: #F9F9F9;
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
            border-left: 4px solid var(--primary);
        }
        
        .about-app h3 {
            color: var(--primary);
            font-size: 18px;
            margin-bottom: 10px;
        }
        
        .about-app p {
            font-size: 13px;
            line-height: 1.6;
            color: var(--text);
        }
        
        .local-badge {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-top: 10px;
        }
        
        .footer {
            text-align: center;
            padding: 20px;
            font-size: 12px;
            color: var(--text);
            opacity: 0.7;
        }
        
        .loading {
            display: none;
            text-align: center;
            margin-top: 20px;
        }
        
        .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            border-top: 4px solid var(--primary);
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <i class="fas fa-motorcycle"></i>
                OloRide
            </div>
            <div class="tagline">DriGo - Driver Gorong</div>
        </div>
        
        <div class="content">
            <div class="welcome-text">
                <h1>Selamat Datang Driver!</h1>
                <p>Bergabunglah dengan komunitas driver terbaik di Gorontalo</p>
            </div>
            
            <button id="googleLogin" class="login-btn">
                <i class="fab fa-google"></i>
                Login dengan Google
            </button>
            
            <div class="about-app">
                <h3>Aplikasi Ojek Lokal Gorontalo</h3>
                <p>
                    OloRide adalah aplikasi ojek online pertama yang dikembangkan khusus untuk masyarakat Gorontalo. 
                    Dengan menjadi driver OloRide, Anda menjadi bagian dari gerakan ekonomi digital lokal yang mendukung 
                    pertumbuhan UMKM dan kesejahteraan warga Gorontalo.
                </p>
                <p>
                    Keunggulan kami: komisi rendah, dukungan 24 jam, dan komunitas driver yang solid. 
                    Aplikasi ini sepenuhnya dikembangkan oleh putra daerah Gorontalo untuk kemajuan bersama.
                </p>
                <span class="local-badge">#BanggaProdukLokal</span>
            </div>
            
            <div id="loading" class="loading">
                <div class="loading-spinner"></div>
                <p>Memproses login...</p>
            </div>
        </div>
        
        <div class="footer">
            &copy; 2023 OloRide - DriGo. All rights reserved.
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    
    <script>
        // Fungsi untuk menerima data dari WebView Kodular
        function receiveDataFromAppInventor(data) {
            try {
                const config = JSON.parse(data);
                initializeFirebase(config);
            } catch (e) {
                console.error("Error parsing config:", e);
                alert("Terjadi kesalahan saat memproses konfigurasi");
            }
        }
        
        // Inisialisasi Firebase
        function initializeFirebase(firebaseConfig) {
            // Cek apakah Firebase sudah diinisialisasi
            if (!firebase.apps.length) {
                firebase.initializeApp(firebaseConfig);
            }
            
            // Setup Google Auth Provider
            const provider = new firebase.auth.GoogleAuthProvider();
            provider.addScope('email');
            provider.addScope('profile');
            
            // Handle login button click
            document.getElementById('googleLogin').addEventListener('click', function() {
                document.getElementById('loading').style.display = 'block';
                
                // Sign in with Google
                firebase.auth().signInWithPopup(provider)
                    .then((result) => {
                        // Kirim data user kembali ke WebView
                        const user = {
                            uid: result.user.uid,
                            displayName: result.user.displayName,
                            email: result.user.email,
                            photoURL: result.user.photoURL,
                            phoneNumber: result.user.phoneNumber
                        };
                        
                        if (window.appinventor && window.appinventor.setWebViewString) {
                            window.appinventor.setWebViewString(JSON.stringify(user));
                        } else {
                            console.log("User logged in:", user);
                            alert("Login berhasil! Silakan lanjutkan di aplikasi.");
                        }
                    })
                    .catch((error) => {
                        console.error("Login error:", error);
                        alert("Login gagal: " + error.message);
                        document.getElementById('loading').style.display = 'none';
                    });
            });
        }
        
        // Jika menggunakan WebView Kodular, data dikirim via webstring
        if (window.appinventor && window.appinventor.getWebViewString) {
            const firebaseConfig = window.appinventor.getWebViewString();
            if (firebaseConfig) {
                receiveDataFromAppInventor(firebaseConfig);
            }
        }
        
        // Informasi tentang aplikasi untuk driver
        const appInfo = `
            <strong>Keuntungan Jadi Driver OloRide:</strong>
            <ul style="margin-top: 10px; padding-left: 20px;">
                <li>Komisi terendah di Gorontalo (hanya 10%)</li>
                <li>Dukungan 24 jam dari tim lokal</li>
                <li>Bonus harian dan mingguan</li>
                <li>Aplikasi ringan dan mudah digunakan</li>
                <li>Pelatihan gratis untuk driver baru</li>
            </ul>
            <p style="margin-top: 10px;">
                <i>"Dengan OloRide, Anda bukan hanya driver, tapi pahlawan transportasi Gorontalo!"</i>
            </p>
        `;
        
        // Tambahkan info ke dalam about-app
        document.querySelector('.about-app').innerHTML += appInfo;
    </script>
</body>
</html>
